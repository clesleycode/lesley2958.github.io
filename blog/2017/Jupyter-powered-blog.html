<html>
				<head>
				<meta charset="utf-8">
			    <meta http-equiv="X-UA-Compatible" content="IE=edge">
			    <meta name="viewport" content="width=device-width, initial-scale=1">
			    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
			    <meta name="description" content="">
			    <meta name="author" content="">
			    <title>Hacking my way to a Jupyter notebook powered blog</title>
<link rel="stylesheet" href="../../assets/css/bootstrap.min.css" />
<link rel="stylesheet" href="../../assets/css/nipun-custom.css" />
<script
  src="https://code.jquery.com/jquery-3.2.1.min.js"
  integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
  crossorigin="anonymous"></script>
<script type="text/javascript" src="https://cdn.jsdelivr.net/jquery.jssocials/1.4.0/jssocials.min.js"></script>
<link type="text/css" rel="stylesheet" href="https://cdn.jsdelivr.net/jquery.jssocials/1.4.0/jssocials.css" />
<link type="text/css" rel="stylesheet" href="https://cdn.jsdelivr.net/jquery.jssocials/1.4.0/jssocials-theme-flat.css" />
<link type="text/css" rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" />


			      <script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML"></script>
    <!-- MathJax configuration -->
    <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ["$","$"], ["\\(","\\)"] ],
            displayMath: [ ["$$",'$$'], ["\\[","\\]"] ],
            processEscapes: true,
            processEnvironments: true
        },
        // Center justify equations in code and markdown cells. Elsewhere
        // we use CSS to left justify single line equations in code cells.
        displayAlign: 'center',
        "HTML-CSS": {
            styles: {'.MathJax_Display': {"margin": 0}},
            linebreaks: { automatic: true }
        }
    });
    </script>
</head>
			    <body>
<nav class="navbar navbar-default">
    <div class="container text-center">

        <div id="navbar" class="navbar-collapse">
            <ul class="nav navbar-nav">
                <li><a href="../../index.html">Home</a></li>
                <li><a href="../../publications.html">Publications</a></li>
                <li><a href="../index.html">Blog</a></li>
                <li><a href="../../files/cv.pdf">CV</a></li>
            </ul>
        </div>
    </div>
</nav>
			    <div class="container" margin="5%">
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Hacking-my-way-to-a-Jupyter-notebook-powered-blog">Hacking my way to a Jupyter notebook powered blog<a class="anchor-link" href="#Hacking-my-way-to-a-Jupyter-notebook-powered-blog">&#182;</a></h1>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="TLDR:-A-blog-post-about-powering-a-blog-through-Jupyter-notebook-and-the-associated-struggles!">TLDR: A blog post about powering a blog through Jupyter notebook and the associated struggles!<a class="anchor-link" href="#TLDR:-A-blog-post-about-powering-a-blog-through-Jupyter-notebook-and-the-associated-struggles!">&#182;</a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Background">Background<a class="anchor-link" href="#Background">&#182;</a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>I have been blogging for close to ten years now. I started off with Wordpress back in 2009 and continued using it for 5 years. IPython notebook had become very popular by then and I moved towards Pelican and hosted my blog cum website on Github. Jake Vanderplas and others had put a lot of effort in customising Pelican and adding IPython notebook support. While everything worked well, over time, Pelican started appealing less to me. The builds got slower as I added more posts. Git history would grow crazy as the blog would be regenerated. I looked into alternative blogging engines like Jekyll, which would probably have similar issues? While Medium.com allows linking Jupyter notebook gists, they appear IFramed. I thought: what if I could use <code>nbconvert</code> utility provided by the awesome folks at Jupyter and create a simplish blog- no hassle, no pagination, plain Python code!</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Enter-nbconvert">Enter nbconvert<a class="anchor-link" href="#Enter-nbconvert">&#182;</a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>My initial experience with <code>nbconvert</code> and converting my Jupyter notebooks to HTML was great. Using <code>nbformat</code>, I created a script that would programatically create an HTML given a .ipynb.</p>
<p>The code looked something like the following:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">from</span> <span class="nn">nbconvert</span> <span class="kn">import</span> <span class="n">HTMLExporter</span>
<span class="kn">import</span> <span class="nn">nbformat</span>

<span class="n">notebook_file</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
<span class="n">html_exporter</span> <span class="o">=</span> <span class="n">HTMLExporter</span><span class="p">()</span>
<span class="n">nb</span> <span class="o">=</span> <span class="n">nbformat</span><span class="o">.</span><span class="n">reads</span><span class="p">(</span><span class="nb">open</span><span class="p">(</span><span class="n">notebook_file</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">read</span><span class="p">(),</span> <span class="n">as_version</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>

<span class="p">(</span><span class="n">body</span><span class="p">,</span> <span class="n">resources</span><span class="p">)</span> <span class="o">=</span> <span class="n">html_exporter</span><span class="o">.</span><span class="n">from_notebook_node</span><span class="p">(</span><span class="n">nb</span><span class="p">)</span>
<span class="n">html_file</span> <span class="o">=</span> <span class="n">notebook_file</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;.ipynb&quot;</span><span class="p">,</span> <span class="s2">&quot;.html&quot;</span><span class="p">)</span>
<span class="n">html_file_writer</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">html_file</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span>
<span class="n">html_file_writer</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">body</span><span class="p">)</span>
<span class="n">html_file_writer</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>After this, the generated HTML would look like the following:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><img src="blog-early.png" alt=""></p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Looks pretty, right! However, there should a way to navigate to blog home, right? Do we need a navbar? Right on! How about google analytics? How about Disqus for comments? How about using Bootsrap for powering the remaining website/blog?</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Adding-Navbar,-Disqus,-Google-Analytics,-Bootstrap">Adding Navbar, Disqus, Google Analytics, Bootstrap<a class="anchor-link" href="#Adding-Navbar,-Disqus,-Google-Analytics,-Bootstrap">&#182;</a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Navbar, Disqus comments, Google analytics should be a part of each blog post, right? So, it is best to have their code injected into each blog post. I wrote a simple Python script which would put the JS and CSS code at the right places for these services.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<div class="highlight"><pre><span></span><span class="n">read_navbar</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;navbar.txt&quot;</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
<span class="n">read_disqus</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;disqus.txt&quot;</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
<span class="n">read_css</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;main_css.txt&quot;</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
<span class="n">read_ga</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;google_analytics.txt&quot;</span><span class="p">,</span><span class="s2">&quot;r&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>

<span class="k">if</span> <span class="n">read_navbar</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">body</span><span class="p">:</span>
    <span class="n">body</span> <span class="o">=</span> <span class="n">body</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;&lt;body&gt;&quot;</span><span class="p">,</span> <span class="s2">&quot;&lt;body&gt;</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="n">read_navbar</span><span class="p">)</span>

<span class="k">if</span> <span class="n">read_ga</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">body</span><span class="p">:</span>
    <span class="n">body</span> <span class="o">=</span> <span class="n">body</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;&lt;/body&quot;</span><span class="p">,</span> <span class="n">read_ga</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&lt;/body&gt;&quot;</span><span class="p">)</span>

<span class="k">if</span> <span class="n">read_disqus</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">body</span><span class="p">:</span>
    <span class="n">body</span> <span class="o">=</span> <span class="n">body</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;&lt;/body&quot;</span><span class="p">,</span> <span class="n">read_disqus</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&lt;/body&gt;&quot;</span><span class="p">)</span>

<span class="k">if</span> <span class="n">read_css</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">body</span><span class="p">:</span>
    <span class="n">body</span> <span class="o">=</span> <span class="n">body</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;&lt;/title&gt;&quot;</span><span class="p">,</span> <span class="s2">&quot;&lt;/title&gt;</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="n">read_css</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>This snippet does what it looks like. Reads in a bunch of CSS and JS code and puts them at the right place in the HTML. Here is how each of these read files looked like, which are provided by the services respectively.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4 id="disqus.txt">disqus.txt<a class="anchor-link" href="#disqus.txt">&#182;</a></h4>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="nx">div</span> <span class="nx">id</span><span class="o">=</span><span class="s2">&quot;disqus_thread&quot;</span><span class="o">&gt;&lt;</span><span class="err">/div&gt;</span>
<span class="o">&lt;</span><span class="nx">script</span><span class="o">&gt;</span>

<span class="cm">/**</span>
<span class="cm">*  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.</span>
<span class="cm">*  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/</span>
<span class="cm">/*</span>
<span class="cm">var disqus_config = function () {</span>
<span class="cm">this.page.url = PAGE_URL;  // Replace PAGE_URL with your page&#39;s canonical URL variable</span>
<span class="cm">this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page&#39;s unique identifier variable</span>
<span class="cm">};</span>
<span class="cm">*/</span>
<span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span> <span class="c1">// DON&#39;T EDIT BELOW THIS LINE</span>
<span class="kd">var</span> <span class="nx">d</span> <span class="o">=</span> <span class="nb">document</span><span class="p">,</span> <span class="nx">s</span> <span class="o">=</span> <span class="nx">d</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s1">&#39;script&#39;</span><span class="p">);</span>
<span class="nx">s</span><span class="p">.</span><span class="nx">src</span> <span class="o">=</span> <span class="s1">&#39;https://ANONYMOUS-FOR_NOW/embed.js&#39;</span><span class="p">;</span>
<span class="nx">s</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span><span class="s1">&#39;data-timestamp&#39;</span><span class="p">,</span> <span class="o">+</span><span class="k">new</span> <span class="nb">Date</span><span class="p">());</span>
<span class="p">(</span><span class="nx">d</span><span class="p">.</span><span class="nx">head</span> <span class="o">||</span> <span class="nx">d</span><span class="p">.</span><span class="nx">body</span><span class="p">).</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">s</span><span class="p">);</span>
<span class="p">})();</span>
<span class="o">&lt;</span><span class="err">/script&gt;</span>
<span class="o">&lt;</span><span class="nx">noscript</span><span class="o">&gt;</span><span class="nx">Please</span> <span class="nx">enable</span> <span class="nx">JavaScript</span> <span class="nx">to</span> <span class="nx">view</span> <span class="nx">the</span> <span class="o">&lt;</span><span class="nx">a</span> <span class="nx">href</span><span class="o">=</span><span class="s2">&quot;https://disqus.com/?ref_noscript&quot;</span><span class="o">&gt;</span><span class="nx">comments</span> <span class="nx">powered</span> <span class="nx">by</span> <span class="nx">Disqus</span><span class="p">.</span><span class="o">&lt;</span><span class="err">/a&gt;&lt;/noscript&gt;</span>
</pre></div>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4 id="google_analytics.txt">google_analytics.txt<a class="anchor-link" href="#google_analytics.txt">&#182;</a></h4>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="nx">script</span><span class="o">&gt;</span>
  <span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">i</span><span class="p">,</span><span class="nx">s</span><span class="p">,</span><span class="nx">o</span><span class="p">,</span><span class="nx">g</span><span class="p">,</span><span class="nx">r</span><span class="p">,</span><span class="nx">a</span><span class="p">,</span><span class="nx">m</span><span class="p">){</span><span class="nx">i</span><span class="p">[</span><span class="s1">&#39;GoogleAnalyticsObject&#39;</span><span class="p">]</span><span class="o">=</span><span class="nx">r</span><span class="p">;</span><span class="nx">i</span><span class="p">[</span><span class="nx">r</span><span class="p">]</span><span class="o">=</span><span class="nx">i</span><span class="p">[</span><span class="nx">r</span><span class="p">]</span><span class="o">||</span><span class="kd">function</span><span class="p">(){</span>
  <span class="p">(</span><span class="nx">i</span><span class="p">[</span><span class="nx">r</span><span class="p">].</span><span class="nx">q</span><span class="o">=</span><span class="nx">i</span><span class="p">[</span><span class="nx">r</span><span class="p">].</span><span class="nx">q</span><span class="o">||</span><span class="p">[]).</span><span class="nx">push</span><span class="p">(</span><span class="nx">arguments</span><span class="p">)},</span><span class="nx">i</span><span class="p">[</span><span class="nx">r</span><span class="p">].</span><span class="nx">l</span><span class="o">=</span><span class="mi">1</span><span class="o">*</span><span class="k">new</span> <span class="nb">Date</span><span class="p">();</span><span class="nx">a</span><span class="o">=</span><span class="nx">s</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="nx">o</span><span class="p">),</span>
  <span class="nx">m</span><span class="o">=</span><span class="nx">s</span><span class="p">.</span><span class="nx">getElementsByTagName</span><span class="p">(</span><span class="nx">o</span><span class="p">)[</span><span class="mi">0</span><span class="p">];</span><span class="nx">a</span><span class="p">.</span><span class="nx">async</span><span class="o">=</span><span class="mi">1</span><span class="p">;</span><span class="nx">a</span><span class="p">.</span><span class="nx">src</span><span class="o">=</span><span class="nx">g</span><span class="p">;</span><span class="nx">m</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">.</span><span class="nx">insertBefore</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">m</span><span class="p">)</span>
  <span class="p">})(</span><span class="nb">window</span><span class="p">,</span><span class="nb">document</span><span class="p">,</span><span class="s1">&#39;script&#39;</span><span class="p">,</span><span class="s1">&#39;https://www.google-analytics.com/analytics.js&#39;</span><span class="p">,</span><span class="s1">&#39;ga&#39;</span><span class="p">);</span>

  <span class="nx">ga</span><span class="p">(</span><span class="s1">&#39;create&#39;</span><span class="p">,</span> <span class="s1">&#39;PUT YOUR CODE HERE&#39;</span><span class="p">,</span> <span class="s1">&#39;auto&#39;</span><span class="p">);</span>
  <span class="nx">ga</span><span class="p">(</span><span class="s1">&#39;send&#39;</span><span class="p">,</span> <span class="s1">&#39;pageview&#39;</span><span class="p">);</span>

<span class="o">&lt;</span><span class="err">/script&gt;</span>
</pre></div>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4 id="main_css.txt">main_css.txt<a class="anchor-link" href="#main_css.txt">&#182;</a></h4>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">link</span> <span class="na">rel</span><span class="o">=</span><span class="s">&quot;stylesheet&quot;</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;../../assets/css/main.css&quot;</span> <span class="p">/&gt;</span>
</pre></div>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4 id="navbar.txt">navbar.txt<a class="anchor-link" href="#navbar.txt">&#182;</a></h4>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">nav</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;nav&quot;</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">ul</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;container&quot;</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;../../index.html&quot;</span><span class="p">&gt;</span>Home<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;../../publications.html&quot;</span><span class="p">&gt;</span>Publications<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;../../blog.html&quot;</span><span class="p">&gt;</span>Blog<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;../../files/cv.pdf&quot;</span><span class="p">&gt;</span>CV<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>

        <span class="p">&lt;/</span><span class="nt">ul</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">nav</span><span class="p">&gt;</span>
</pre></div>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Adding-Index-page-for-blog-posts">Adding Index page for blog posts<a class="anchor-link" href="#Adding-Index-page-for-blog-posts">&#182;</a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>I then created a simple index page which would enlist all the blog posts. A sample post linking would be:</p>
<div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;&lt;</span><span class="nt">a</span> <span class="na">href </span><span class="o">=</span><span class="s">&quot;blog/2017/nmf-nnls.html&quot;</span><span class="p">&gt;</span>Non-negative matrix factorisation using non-negative least squares<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span> (29 March)<span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
</pre></div>
<p>So, everytime, I would add a blog post, all I would need to do is to invoke the Python script (to convert the .ipynb to HTML; and add disqus, google analytics, navbar, CSS) and link the post on the index page. All working well thus far!</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Blog-not-mobile-friendly-:(">Blog not mobile-friendly :(<a class="anchor-link" href="#Blog-not-mobile-friendly-:(">&#182;</a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>I opened my blog on my mobile and it did not look pretty. There was just too much whitespace! It would look something like the following:</p>
<p><img src="blog-mobile.jpg" alt=""></p>
<p>Google Chrome suggested me to render a mobile-friendly page, which did not look very good to me! :(</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Fixing-one-thing-at-a-time">Fixing one thing at a time<a class="anchor-link" href="#Fixing-one-thing-at-a-time">&#182;</a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>I then started my quest to dive deep into the CSS inserted by nbconvert and figure what causes the page to be not mobile friendly. I made a few hand-wavy attempts. This approach didn't seem right. Twitter bootstrap (which nbconvert uses as base) is responsive and mobile friendly. Then, it surely would be the CSS used by Jupyter's nbconvert? I opened an <a href="https://github.com/jupyter/nbconvert/issues/599">issue</a> on the nbconvert repo as well.</p>
<p>Against this background, this post is my attempts at understanding and building a responsive blog powered by Jupyter notebooks. I also hoped that I could help with the <code>nbconvert</code> issue I had created.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Enter-nbconvert-with-basic-template">Enter nbconvert with <code>basic</code> template<a class="anchor-link" href="#Enter-nbconvert-with-basic-template">&#182;</a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><code>nbconvert</code> also allows exporting to an HTML that doesn't have all the fancy CSS provided in the default template. My plan at this point was:</p>
<ol>
<li>Export notebook using <code>basic</code> template</li>
<li>Add Bootstrap to provide good defaults</li>
<li>Add custom CSS to fix places where <code>basic</code> template exported HTML and Bootstrap do not comply</li>
</ol>
<p>I thought this would take a couple of hours at max. How wrong could I be!</p>
<p>This is how the blog post looked at this point of time.</p>
<p><img src="blog-default.png" alt=""></p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Oh, and if you are wondering if I picked up a Bootstrap customisation, then you are right. I liked the <a href="https://bootswatch.com/journal/">Journal theme</a> from Bootswatch.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Adding-viewport-code">Adding viewport code<a class="anchor-link" href="#Adding-viewport-code">&#182;</a></h3><p>I added the following code to inject the following code. <code>&lt;meta name="viewport" content="width=device-width, initial-scale=1"&gt;</code> is important for mobile-friendliness!</p>
<div class="highlight"><pre><span></span><span class="n">body</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;&lt;html&gt;</span>
<span class="s2">                &lt;head&gt;</span>
<span class="s2">                &lt;meta charset=&quot;utf-8&quot;&gt;</span>
<span class="s2">                &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=edge&quot;&gt;</span>
<span class="s2">                &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1&quot;&gt;</span>

<span class="s2">                &lt;meta name=&quot;description&quot; content=&quot;&quot;&gt;</span>
<span class="s2">                &lt;meta name=&quot;author&quot; content=&quot;&quot;&gt;</span>
<span class="s2">                &lt;title&gt;Nipun Batra&lt;/title&gt;</span>
<span class="s2">                &lt;/head&gt;</span>
<span class="s2">                &lt;body&gt;</span>
<span class="s2">                &lt;div class=&quot;container&quot; margin=&quot;5%&quot;&gt;&quot;&quot;&quot;</span><span class="o">+</span><span class="n">body</span><span class="o">+</span><span class="s2">&quot;&lt;/div&gt;&lt;/body&gt;&lt;/html&gt;&quot;</span>
</pre></div>
<p>Now, adding this the blog post was responsive and Google Chrome didn't complain on the mobile. To be very sure, I checked on the mobile friendly test powered by Google.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Adding-MathJax-JS">Adding MathJax JS<a class="anchor-link" href="#Adding-MathJax-JS">&#182;</a></h3><p>This was simple. In Python:</p>
<div class="highlight"><pre><span></span><span class="n">read_mathjax</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;mathjax.txt&quot;</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
<span class="n">body</span> <span class="o">=</span> <span class="n">body</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;&lt;/head&gt;&quot;</span><span class="p">,</span> <span class="n">read_mathjax</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&lt;/head&gt;&quot;</span><span class="p">)</span>
</pre></div>
<p>where mathjax.txt looked like:</p>
<div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
    <span class="c">&lt;!-- MathJax configuration --&gt;</span>
    <span class="p">&lt;</span><span class="nt">script</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text/x-mathjax-config&quot;</span><span class="p">&gt;</span>
    <span class="nx">MathJax</span><span class="p">.</span><span class="nx">Hub</span><span class="p">.</span><span class="nx">Config</span><span class="p">({</span>
        <span class="nx">tex2jax</span><span class="o">:</span> <span class="p">{</span>
            <span class="nx">inlineMath</span><span class="o">:</span> <span class="p">[</span> <span class="p">[</span><span class="s2">&quot;$&quot;</span><span class="p">,</span><span class="s2">&quot;$&quot;</span><span class="p">],</span> <span class="p">[</span><span class="s2">&quot;\\(&quot;</span><span class="p">,</span><span class="s2">&quot;\\)&quot;</span><span class="p">]</span> <span class="p">],</span>
            <span class="nx">displayMath</span><span class="o">:</span> <span class="p">[</span> <span class="p">[</span><span class="s2">&quot;$$&quot;</span><span class="p">,</span><span class="s1">&#39;$$&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s2">&quot;\\[&quot;</span><span class="p">,</span><span class="s2">&quot;\\]&quot;</span><span class="p">]</span> <span class="p">],</span>
            <span class="nx">processEscapes</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
            <span class="nx">processEnvironments</span><span class="o">:</span> <span class="kc">true</span>
        <span class="p">},</span>
        <span class="c1">// Center justify equations in code and markdown cells. Elsewhere</span>
        <span class="c1">// we use CSS to left justify single line equations in code cells.</span>
        <span class="nx">displayAlign</span><span class="o">:</span> <span class="s1">&#39;center&#39;</span><span class="p">,</span>
        <span class="s2">&quot;HTML-CSS&quot;</span><span class="o">:</span> <span class="p">{</span>
            <span class="nx">styles</span><span class="o">:</span> <span class="p">{</span><span class="s1">&#39;.MathJax_Display&#39;</span><span class="o">:</span> <span class="p">{</span><span class="s2">&quot;margin&quot;</span><span class="o">:</span> <span class="mi">0</span><span class="p">}},</span>
            <span class="nx">linebreaks</span><span class="o">:</span> <span class="p">{</span> <span class="nx">automatic</span><span class="o">:</span> <span class="kc">true</span> <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">});</span>
    <span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</pre></div>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Fixing-the-fonts">Fixing the fonts<a class="anchor-link" href="#Fixing-the-fonts">&#182;</a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The fonts simply looked too tiny at this point. I also happened to look at the font used in the navbar. It looked pretty! If only it was lighter. I added the following CSS into my custom css file, which I included using Python (as shown before)</p>
<div class="highlight"><pre><span></span><span class="nt">body</span> <span class="p">{</span>
    <span class="k">font-family</span><span class="p">:</span> <span class="s2">&quot;News Cycle&quot;</span><span class="p">,</span> <span class="s2">&quot;Arial Narrow Bold&quot;</span><span class="p">,</span> <span class="kc">sans-serif</span><span class="p">;</span>
    <span class="k">font-size</span><span class="p">:</span> <span class="mi">21</span><span class="kt">px</span><span class="p">;</span>
    <span class="k">line-height</span><span class="p">:</span> <span class="mf">1.42857143</span><span class="p">;</span>
    <span class="k">color</span><span class="p">:</span> <span class="mh">#777777</span><span class="p">;</span>
    <span class="k">background-color</span><span class="p">:</span> <span class="mh">#ffffff</span>
<span class="p">}</span>
</pre></div>
<p>The following screenshot shows how the blog post looked at this stage.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><img src="blog-font-size.png" alt=""></p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Starting to look pretty, no? But, those ugly anchor links in red!</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Fixing-the-anchor-links">Fixing the anchor links<a class="anchor-link" href="#Fixing-the-anchor-links">&#182;</a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>To be very honest, I had little luck trying to remove the anchor links. Yes, I am a novice at CSS. But, I thought I was not at all that bad at googling. Turns out the best way to fix this was to look for the tag on the HTML generated by <code>nbconvert</code> (in default mode). Felt so grateful to the Jupyter team at this point! Here is the copied CSS.</p>
<div class="highlight"><pre><span></span><span class="nt">a</span><span class="p">.</span><span class="nc">anchor-link</span><span class="p">:</span><span class="nd">link</span> <span class="p">{</span>
    <span class="k">text-decoration</span><span class="p">:</span> <span class="kc">none</span><span class="p">;</span>
    <span class="k">padding</span><span class="p">:</span> <span class="mi">0</span> <span class="mi">20</span><span class="kt">px</span><span class="p">;</span>
    <span class="k">visibility</span><span class="p">:</span> <span class="kc">hidden</span>
<span class="p">}</span>

<span class="nt">h1</span><span class="p">:</span><span class="nd">hover</span> <span class="p">.</span><span class="nc">anchor-link</span><span class="o">,</span>
<span class="nt">h2</span><span class="p">:</span><span class="nd">hover</span> <span class="p">.</span><span class="nc">anchor-link</span><span class="o">,</span>
<span class="nt">h3</span><span class="p">:</span><span class="nd">hover</span> <span class="p">.</span><span class="nc">anchor-link</span><span class="o">,</span>
<span class="nt">h4</span><span class="p">:</span><span class="nd">hover</span> <span class="p">.</span><span class="nc">anchor-link</span><span class="o">,</span>
<span class="nt">h5</span><span class="p">:</span><span class="nd">hover</span> <span class="p">.</span><span class="nc">anchor-link</span><span class="o">,</span>
<span class="nt">h6</span><span class="p">:</span><span class="nd">hover</span> <span class="p">.</span><span class="nc">anchor-link</span> <span class="p">{</span>
    <span class="k">visibility</span><span class="p">:</span> <span class="kc">visible</span>
<span class="p">}</span>
</pre></div>
<p>The following screenshot shows how things looked after including this bit of CSS.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><img src="blog-anchor.png" alt=""></p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>I next looked at a notebook containing a table (Pandas.dataframe). It looked horrible (shown below)</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><img src="blog-table.png" alt=""></p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Fixing-the-table">Fixing the table<a class="anchor-link" href="#Fixing-the-table">&#182;</a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>I added the following CSS to ease out the tables a bit. Also, to add hover on selected row.</p>
<div class="highlight"><pre><span></span><span class="nt">th</span><span class="o">,</span>
<span class="nt">td</span> <span class="p">{</span>
    <span class="k">padding</span><span class="p">:</span> <span class="mi">8</span><span class="kt">px</span><span class="p">;</span>
<span class="p">}</span>

<span class="nt">tr</span><span class="p">:</span><span class="nd">hover</span> <span class="p">{</span>
    <span class="k">background-color</span><span class="p">:</span> <span class="mh">#f5f5f5</span>
<span class="p">}</span>
</pre></div>
<p>The tables looked a whole lot prettier after this (as shown below)</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><img src="blog-table-after.png" alt=""></p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Other-fixes">Other fixes<a class="anchor-link" href="#Other-fixes">&#182;</a></h3><p>I added a few other fixes.</p>
<ul>
<li>Increasing the space between Jupyter notebook cells</li>
</ul>
<div class="highlight"><pre><span></span><span class="nt">div</span><span class="p">.</span><span class="nc">cell</span> <span class="p">{</span>
    <span class="k">padding</span><span class="p">:</span> <span class="mi">4</span><span class="kt">px</span>
<span class="p">}</span>
</pre></div>
<ul>
<li>Increasing the font size of code cells</li>
</ul>
<div class="highlight"><pre><span></span><span class="nt">pre</span> <span class="p">{</span>
    <span class="k">font-size</span><span class="p">:</span> <span class="mi">15</span><span class="kt">px</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
<ul>
<li>Making the prompts (In [] and Out []) of a different colours</li>
</ul>
<div class="highlight"><pre><span></span><span class="nt">div</span><span class="p">.</span><span class="nc">input_prompt</span> <span class="p">{</span>
    <span class="k">color</span><span class="p">:</span> <span class="kc">firebrick</span><span class="p">;</span>
<span class="p">}</span>

<span class="nt">div</span><span class="p">.</span><span class="nc">output_prompt</span> <span class="p">{</span>
    <span class="k">color</span><span class="p">:</span> <span class="kc">firebrick</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
<ul>
<li>Making the navbar prettier</li>
</ul>
<div class="highlight"><pre><span></span><span class="p">.</span><span class="nc">navbar</span> <span class="p">{</span>
    <span class="k">font-size</span><span class="p">:</span> <span class="mi">27</span><span class="kt">px</span><span class="p">;</span>
    <span class="k">font-family</span><span class="p">:</span> <span class="s2">&quot;News Cycle&quot;</span><span class="p">,</span> <span class="s2">&quot;Arial Narrow Bold&quot;</span><span class="p">,</span> <span class="kc">sans-serif</span><span class="p">;</span>
    <span class="k">font-weight</span><span class="p">:</span> <span class="mi">500</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
<ul>
<li>Making the heading 1, 2, 3 and 4 used in the notebook of a lighter weight</li>
</ul>
<div class="highlight"><pre><span></span><span class="p">.</span><span class="nc">text_cell</span><span class="p">.</span><span class="nc">rendered</span> <span class="nt">h1</span><span class="o">,</span>
<span class="nt">h2</span><span class="o">,</span>
<span class="nt">h3</span><span class="o">,</span>
<span class="nt">h4</span> <span class="p">{</span>
    <span class="k">font-weight</span><span class="p">:</span> <span class="mi">100</span>
<span class="p">}</span>
</pre></div>
<ul>
<li>Ensuring that images are <code>responsive</code></li>
</ul>
<div class="highlight"><pre><span></span><span class="nt">img</span> <span class="p">{</span>
    <span class="k">max-width</span><span class="p">:</span> <span class="mi">100</span><span class="kt">%</span>
<span class="p">}</span>
</pre></div>
<p>At this stage, the blog started looking like it's current avatar!</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Adding-social-media-icons">Adding social media icons<a class="anchor-link" href="#Adding-social-media-icons">&#182;</a></h3><p>I next wrote some code for social media liking/sharing using <a href="http://js-socials.com/">jssocials</a>. It was again the usual inject the JS and CSS programatically into each web page. Along with that, I had to make another change- I would need to insert a title for each HTML page. Since this title is used by sharing services, it better reflect the content of the page. I chose to pick the blog title, which I always put in <code>&lt;h1&gt;</code>. I wrote a simple Python snippet to find this.</p>
<div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">bs4</span> <span class="kn">import</span> <span class="n">BeautifulSoup</span>
    <span class="n">soup</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span><span class="n">body</span><span class="p">,</span> <span class="s1">&#39;html.parser&#39;</span><span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">title</span> <span class="o">=</span> <span class="n">soup</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="s1">&#39;h1&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">contents</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">title</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span> <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Nipun Batra&quot;</span>
    <span class="k">except</span><span class="p">:</span>
        <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Nipun Batra&quot;</span><span class="n">a</span>
</pre></div>
<p>Now, I programatically passed the title to the HTML. Now, the footer looked like the following.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><img src="blog-footer.png" alt=""></p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Clicking on any of these would share the link of the current page and the text shared alongside would be the title of the page</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Unicode-:(">Unicode :(<a class="anchor-link" href="#Unicode-:(">&#182;</a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>All seemed going well up to this point, till I encountered the following error while writing the converted HTML for one of my blog posts.</p>
<div class="highlight"><pre><span></span><span class="o">/</span><span class="n">Users</span><span class="o">/</span><span class="n">nipunbatra</span><span class="o">/</span><span class="n">git</span><span class="o">/</span><span class="n">nipunbatra</span><span class="o">.</span><span class="n">github</span><span class="o">.</span><span class="n">io</span><span class="o">/</span><span class="n">blog</span><span class="o">/</span><span class="n">add_static_content</span><span class="o">.</span><span class="n">py</span> <span class="ow">in</span> <span class="n">convert</span><span class="p">(</span><span class="n">notebook_file</span><span class="p">)</span>
    <span class="mi">122</span>         <span class="n">html_file</span> <span class="o">=</span> <span class="n">notebook_file</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;.ipynb&quot;</span><span class="p">,</span> <span class="s2">&quot;.html&quot;</span><span class="p">)</span>
    <span class="mi">123</span>         <span class="n">html_file_writer</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">html_file</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span>
<span class="o">--&gt;</span> <span class="mi">124</span>         <span class="n">html_file_writer</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">body</span><span class="p">)</span>
    <span class="mi">125</span>         <span class="n">html_file_writer</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

<span class="ne">UnicodeEncodeError</span><span class="p">:</span> <span class="s1">&#39;ascii&#39;</span> <span class="n">codec</span> <span class="n">can</span><span class="s1">&#39;t encode character u&#39;</span>\<span class="n">xd7</span><span class="s1">&#39; in position 45194: ordinal not in range(128)</span>
</pre></div>
<p>I found that the offending character was a X, used for displaying dataframe- 10 X 5. Googling my way around this issue, I found that the solution lay in using Python 3 open. Maybe, high time I shifted to Python 3.</p>
<p>The fix was as simple as:</p>
<div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">builtins</span> <span class="kn">import</span> <span class="nb">open</span>
</pre></div>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Building-all">Building all<a class="anchor-link" href="#Building-all">&#182;</a></h3><p>How about a script to build all the IPython/Jupter notebooks?</p>
<div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">glob</span>
<span class="kn">from</span> <span class="nn">add_static_content</span> <span class="kn">import</span> <span class="n">convert</span>

<span class="n">base_folder</span> <span class="o">=</span> <span class="s2">&quot;.&quot;</span>

<span class="k">def</span> <span class="nf">get_immediate_subdirectories</span><span class="p">(</span><span class="n">a_dir</span><span class="p">):</span>
    <span class="k">return</span> <span class="p">[</span><span class="n">name</span> <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="n">a_dir</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">a_dir</span><span class="p">,</span> <span class="n">name</span><span class="p">))]</span>

<span class="n">to_ignore</span>  <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;.idea&#39;</span><span class="p">,</span><span class="s1">&#39;.ipynb_checkpoints&#39;</span><span class="p">]</span>
<span class="n">subdirs</span> <span class="o">=</span> <span class="n">get_immediate_subdirectories</span><span class="p">(</span><span class="n">base_folder</span><span class="p">)</span>
<span class="n">subdirs</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">subdirs</span> <span class="k">if</span> <span class="n">x</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">to_ignore</span><span class="p">]</span>

<span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">subdirs</span><span class="p">[:]:</span>
    <span class="n">year_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">base_folder</span><span class="p">,</span> <span class="n">s</span><span class="p">)</span>
    <span class="n">notebooks</span>  <span class="o">=</span> <span class="n">glob</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">year_path</span><span class="p">,</span> <span class="s2">&quot;*.ipynb&quot;</span><span class="p">))</span>
    <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">notebooks</span><span class="p">[:]:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">out</span> <span class="o">=</span> <span class="n">convert</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">print</span> <span class="n">n</span>
</pre></div>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="To-Do">To Do<a class="anchor-link" href="#To-Do">&#182;</a></h3><p>Gosh! Everything works now! There's a lot more to be done though!</p>
<ol>
<li>Use Jinja templating. Would end up being less hacky!</li>
<li>Extract out plot images. Currently the images are base64 encoded. How about extract out the png? I didn't have luck with the directory and programatically creating blog posts.</li>
<li>Way to subscribe to posts? </li>
<li>Markdown to Blog post. The easiest way is to have a tiny Python snippet to read the .md file and put the markdown into a notebook. Rest already done!</li>
<li>Spell check!</li>
<li>Many more!</li>
</ol>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Phew">Phew<a class="anchor-link" href="#Phew">&#182;</a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>It was a lot of learning and a lot of agony! I really wish to thank the Jupyter devs who have done such an amazing job. I would also like to thank all the people whose CSS tricks I benefited from. Feel free to let me know via email or comments what you think about this.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Repository">Repository<a class="anchor-link" href="#Repository">&#182;</a></h3><p>You can have a look at the repo containing the code up <a href="https://github.com/nipunbatra/nipunbatra.github.io">here</a>.</p>

</div>
</div>
</div>
 

</div><script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-96903131-1', 'auto');
  ga('send', 'pageview');

</script>
<div class="container">
<div id="share" class="navbar-static-bottom"></div>


    <script>
        $("#share").jsSocials({
            shares: ["email", "twitter", "facebook", "googleplus", "linkedin", "pinterest", "stumbleupon", "whatsapp"]
        });
    </script>

<div id="disqus_thread"></div>

<script>

/**
*  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
*  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/
/*
var disqus_config = function () {
this.page.url = PAGE_URL;  // Replace PAGE_URL with your page's canonical URL variable
this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
};
*/
(function() { // DON'T EDIT BELOW THIS LINE
var d = document, s = d.createElement('script');
s.src = 'https://nipunbatra-1.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
                                
    

<link rel="stylesheet" href="../../assets/css/bootstrap.min.css" />
<link rel="stylesheet" href="../../assets/css/nipun-custom.css" />
<script
  src="https://code.jquery.com/jquery-3.2.1.min.js"
  integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
  crossorigin="anonymous"></script>
<script type="text/javascript" src="https://cdn.jsdelivr.net/jquery.jssocials/1.4.0/jssocials.min.js"></script>
<link type="text/css" rel="stylesheet" href="https://cdn.jsdelivr.net/jquery.jssocials/1.4.0/jssocials.css" />
<link type="text/css" rel="stylesheet" href="https://cdn.jsdelivr.net/jquery.jssocials/1.4.0/jssocials-theme-flat.css" />
<link type="text/css" rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" />


</body></html>